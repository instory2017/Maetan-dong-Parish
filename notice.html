<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>공지사항 | 매탄동성당</title>

  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">
  <link href="https://webfontworld.github.io/gmarket/GmarketSans.css" rel="stylesheet"/>

  <style>
    :root{
      --ink:#111827;
      --muted:#6b7280;
      --green:#1c3f39;
      --line:#e5e7eb;
      --maxw:980px;
      --radius:18px;
      --bg:#f8fafc;
    }
    *{box-sizing:border-box}
    html,body{
      margin:0;padding:0;background:#fff;color:var(--ink);
      font-family:'GmarketSans','Noto Sans KR',sans-serif;
      line-height:1.65;
    }
    a{color:inherit;text-decoration:none}

    .topbar{
      position:sticky;top:0;z-index:50;
      background:#fff;border-bottom:1px solid var(--line);
    }
    .wrap{max-width:var(--maxw);margin:0 auto;padding:0 16px}
    .nav{
      min-height:72px;display:flex;align-items:center;justify-content:space-between;gap:12px;
    }
    .brand{
      font-weight:900;color:var(--green);
      letter-spacing:-0.2px;
    }
    .btn{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 14px;border-radius:999px;
      border:1px solid var(--line);
      background:#fff;font-weight:800;
    }
    .btn:hover{background:var(--bg)}
    .btn-cafe{
      border:2px solid var(--green);
      color:var(--green);
      padding:10px 16px;
    }
    .btn-cafe:hover{background:var(--green);color:#fff}

    main{padding:18px 0 40px}

    h1{
      margin:0 0 6px;
      font-size:22px;
      letter-spacing:-0.3px;
    }
    .sub{
      margin:0 0 18px;
      color:var(--muted);
      font-size:14px;
    }

    .panel{
      border:1px solid var(--line);
      border-radius:var(--radius);
      overflow:hidden;
      background:#fff;
      box-shadow:0 10px 24px rgba(17,24,39,0.06);
    }

    .list{
      list-style:none;margin:0;padding:0;
    }
    .item{
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      display:flex;flex-direction:column;gap:6px;
    }
    .item:last-child{border-bottom:0}

    .row{
      display:flex;align-items:flex-start;justify-content:space-between;gap:12px;
    }
    .title{
      font-weight:900;
      letter-spacing:-0.2px;
    }
    .meta{
      font-size:12px;color:var(--muted);white-space:nowrap;
      margin-top:2px;
    }
    .body{
      color:#374151;
      font-size:14px;
    }

    .badge{
      display:inline-flex;align-items:center;
      padding:4px 10px;border-radius:999px;
      font-size:12px;font-weight:900;
      border:1px solid #fecaca;
      background:#fff1f2;
      color:#b91c1c;
      margin-right:8px;
    }

    .empty{
      padding:18px 16px;
      color:var(--muted);
      font-size:14px;
    }

    footer{
      margin-top:18px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
      padding:18px 0 30px;
    }
  </style>
</head>

<body>
  <div class="topbar">
    <div class="wrap nav">
      <div class="brand">매탄동성당</div>
      <a class="back" href="index.html">← 홈으로</a>
      </div>
    </div>
  </div>

  <main class="wrap">
    <h1>공지사항</h1>
    <p class="sub">매탄동성당 교우 여러분께 알립니다.</p>

    <div class="panel">
      <ul id="noticeList" class="list"></ul>
      <div id="emptyState" class="empty" style="display:none;">등록된 공지가 없습니다.</div>
    </div>

    <footer>© <span id="y"></span> Maetan-dong Catholic Parish</footer>
  </main>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>

  <!-- 공지 데이터 -->
  <script src="notice.js"></script>

  <!-- 렌더링 -->
  <script>
    const listEl = document.getElementById("noticeList");
    const emptyEl = document.getElementById("emptyState");

    const items = (window.NOTICES && Array.isArray(window.NOTICES.text)) ? window.NOTICES.text : [];

    if (!items.length) {
      emptyEl.style.display = "block";
    } else {
      // 최신순(날짜 기준) 정렬
      const sorted = items.slice().sort((a,b) => (b.date || "").localeCompare(a.date || ""));

      sorted.forEach(n => {
        const li = document.createElement("li");
        li.className = "item";

        const urgent = n.urgent ? `<span class="badge">긴급</span>` : "";

        li.innerHTML = `
          <div class="row">
            <div class="title">${urgent}${escapeHtml(n.title || "")}</div>
            <div class="meta">${escapeHtml(n.date || "")}</div>
          </div>
          ${n.body ? `<div class="body">${escapeHtml(n.body)}</div>` : ``}
        `;
        listEl.appendChild(li);
      });
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }
  </script>
</body>
</html>
